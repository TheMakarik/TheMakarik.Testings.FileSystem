`FileSystem` и `FileSystemBuilder` имеет довольно большое количество деталей для внутренней реализации, которые могут быть полезны для создания разширений или же

В первую очередь `IFileSystemBuilder` интерфейс имеет три метода, один из них это `AddRoot(string root)` который принимает абсолютный путь к **не созданной** директории, которая будет являться корневой для экземпляра `IFileSystem` а второй метод `Add(string rootRelativePath, Action<string, IFileSystemBuilder> additionalAction);` где `Action<string, IFileSystemBuilder> additionalAction` представляет собой действие по заполнению тестовой файловой системы, которое будет вызвано в методе `Build` у `IFileSystemBuilder`, и уже названный метод `Build()` возвращающий экземпляр интерфейса IFileSystemB


````csharp
 private readonly IFileSystem _fileSystem = FileSystem.BeginBuilding()
        .AddRoot("MY_TEST_TEMP_FOLDER")
        .AddFile("my-test-file.txt")  //Действие отложено до метода Build
        .AddFile("my-test-file2.txt", "has content")  //Действие отложено до метода Build
        .AddFile("my-test-file3.txt", "has content", out var fullPath)  //Действие отложено до метода Build
        .Build();
````

Учтите что если во время создания элементов `FileSystem` произойдет исключение, для того чтобы не получать `System.InvalidOperationException` связанное с тем что папка уже существует, все созданное содержимое корневой папки и она сама будут удалены

У `IFileSystemBuilder` есть несколько методов расширения сделанных для упрощения  создания корневой директории


